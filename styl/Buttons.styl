/* Button: Default: Gray */
button,
.button {
	display: inline-block;

	// TODO: Replace padding with line-height
	padding: 0.5em 10*$px;

	border: $px solid rgb(110, 110, 110);
	border-radius: 5*$px;

	gradient($button-gray-gradient);
	
	box-shadow: inset 0 $px $px rgba(255, 255, 255, 0.55),
				inset 0 -1*$px $px rgba(255, 255, 255, 0.15),
				inset $px 0 $px rgba(255, 255, 255, 0.15),
				inset -1*$px 0 $px rgba(255, 255, 255, 0.15),
				0 0 $px rgba(0, 0, 0, 1),
				0 $px $px rgba(255, 255, 255, 0.35);

	color: $button-text-color;
	font-family: $button-font;
	font-size: 0.875em;
	font-weight: bold;
	text-shadow: 0 -1*$px $px rgba(0, 0, 0, 0.5);
	text-decoration: none; // Reset underline on .button
	text-align: center;
	
	user-select: none;
	
	cursor: pointer;
	
	-webkit-appearance: none; // Remove buttonness

	.badge {
		position: absolute;
		right: -0.75em;
		top: -0.438em;
		z-index: 1;
		
		font-size: 0.8625rem;

		&.left {
			left: -0.75rem;
			right: auto;
		}
	}
	
	&:active {
		gradient($button-gray-down-gradient);
	}
	

	// Large button
	&.large {
		border-radius: 0.625rem;
		
		font-size: 1.5rem;
		font-weight: bold;
	
		& i {
			font-size: 1.35rem;
			vertical-align: middle;
			line-height: 0.5em;
			margin-right: 0.1em;
		}
	}


	/* Button: blue */
	&.blue {
		border-color: $button-blue-border-color;
	
		gradient-shiny($button-blue-gradient);

		&:active {
			gradient-shiny($button-blue-down-gradient);
		}
	}

	/* Button: green */
	&.green {
		border-color: $button-green-border-color;
	
		gradient-shiny($button-green-gradient);

		&:active {
			gradient-shiny($button-green-down-gradient);
		}
	}
	
	/* Button: black */
	&.black {
		border-color: $button-black-border-color;
	
		gradient($button-black-gradient);

		&:active {
			gradient($button-black-down-gradient);
		}
	}

	/* Button: red */
	&.red {
		border-color: $button-red-border-color;
	
		gradient-shiny($button-red-gradient);
	
		&:active {
			gradient-shiny($button-red-down-gradient);
		}
	}

	/* Button: white */
	&.white {
		padding: 0.75rem 0.5rem;

		background: $frame-inner-background-color;
		
		box-shadow: 0 $px 0 $frame-highlight-color,
					inset 0 $px 2*$px rgba(0, 0, 0, 0.20);

		border: $px solid $frame-inner-border-color;
		border-radius: 0.625rem;

		font-size: 1.125rem;
		color: black;
		text-shadow: none;
	}

	/* Button: round */
	&.round {
		position: relative;
		border-box();
	
		margin: 0.8em 0 0 0.8em;
		padding: 0;
		width: 1.675em;
		height: 1.675em;
	
		overflow: hidden;
	
		border: 0.175em solid white;
		border-radius: 1em;

		color: white;
		line-height: 1.475em;
		text-align: center;

		box-shadow: 0 0 0.4em rgba(0,0,0,0.5);

		text-shadow: 0 -1*$px 0 rgba(0, 0, 0, 0.2);
	
		i {
			font-size: 1.15rem;
		}

		&.blue {
			gradient($button-round-blue-gradient);
		
			&:active {
				gradient($button-round-blue-down-gradient);
			}
		}

		&.red {
			gradient($button-round-red-gradient);
		
			&:active {
				gradient($button-round-red-down-gradient);
			}
		}
		
		&.unlock {
			transition: all 0.075s ease-in;
			
			i {
				font-size: 1rem;
			}

			&.unlocked {
				transform: rotate(-90deg);
				// margin-top: 0.0000001em; // Fix a Chrome bug when toggling the rotation a few times
			}
		}
	}
	
	&.back,
	&.forward {
		position: relative;
		
		&:before {
			display: block;

			margin-top: -1 * ($header-button-size / 4);
			top: 50%;

			position: absolute;
			z-index: 1;
			
			height: $arrow-button-triangle-size;
			width: $arrow-button-triangle-size;

			// Fix antialiasing problems in Chrome: http://stackoverflow.com/a/6898097/1170723
			// -webkit-backface-visibility: hidden; // Causes jagged edges in iOS

			// Smooth in iOS, jagged in Chrome
			transform: rotate(-45deg) skew($arrow-button-triangle-skew, $arrow-button-triangle-skew);

			// Smooth in Chrome, jagged in iOS
			// transform: rotate3d(0, 0, 1, -45deg) skew($arrow-button-triangle-skew, $arrow-button-triangle-skew);

			content: '';
		}
	}
	
	&.back {
		margin-left: 0.65rem !important;
		
		padding-left: 0.5rem !important;
		
		border-top-left-radius: 	$arrow-button-radius !important;
		border-bottom-left-radius: 	$arrow-button-radius !important;
		
		border-left: none;
		
		&:before {
			left: $arrow-offset;

			-webkit-mask-image: -webkit-gradient(linear, left top, right bottom,
					from(black),
					color-stop(0.6, black),
					color-stop(0.6, transparent),
					to(transparent));
		
			box-shadow: $px $px $px rgba(0,0,0,0.5) inset;
		}
	}

	&.forward {
		margin-right: 0.65rem !important;
		
		padding-right: 0.5rem !important;
		
		border-top-right-radius: 	$arrow-button-radius !important;
		border-bottom-right-radius: $arrow-button-radius !important;
		
		&:before {
			right: $arrow-offset;

			// Good in Chrome < 32px, bad in iOS
			// right: -0.5rem + $px; // Add a half pixel, otherwise the shadow shows through
		
			-webkit-mask-image: -webkit-gradient(linear, right bottom, left top,
					from(black),
					color-stop(0.6, black),
					color-stop(0.6, transparent),
					to(transparent));
		
			box-shadow: -1*$px -1*$px $px rgba(0,0,0,0.5) inset;
		}
	}


	&:active {
		gradient($header-button-down-gradient);
	}
	
	&.default {
		color: $header-button-default-text-color;
	
		&:active {
			gradient($header-button-default-down-gradient);
		}
	
		&.back:before,
		&.forward:before {
			background-image: -webkit-gradient(linear, left bottom, right top, from(lighten($header-button-default-gradient[1], $arrow-lighten)), to(darken($header-button-default-gradient[0], $arrow-darken)));
		}
		
		&.back:active:before,
		&.forward:active:before {
			background-image: -webkit-gradient(linear, left bottom, right top, from(lighten($header-button-default-down-gradient[1], $arrow-lighten)), to(darken($header-button-default-down-gradient[0], $arrow-darken)));
		}
	}

	&.back:before,
	&.forward:before {
		background-image: -webkit-gradient(linear, left bottom, right top, from(lighten($header-button-gradient[1], $arrow-lighten)), to(darken($header-button-gradient[0], $arrow-darken)));
	}
	
	&.back:active:before,
	&.forward:active:before {
		background-image: -webkit-gradient(linear, left bottom, right top, from(lighten($header-button-down-gradient[1], $arrow-lighten)), to(darken($header-button-down-gradient[0], $arrow-darken)));
	}

	/* Button: Disabled */
	&.disabled,
	&:disabled,
	&:disabled:active,
	&.disabled:active {
		border-color: $button-disabled-border-color;

		box-shadow: inset 0 -($px) $px rgba(0, 0, 0, 0.05),
					inset 0 $px 2*$px rgba(0, 0, 0, 0.1);
				
		gradient($button-disabled-gradient);
	
		cursor: default;
	}
}
